commit 5eb01a119212be45e4bd14557375d0f01446efe5
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Tue Dec 2 10:27:42 2025 +0100

    Add configurable price threshold and minimum difference settings
    
    - price_threshold_percent: Percentage deviation from average to trigger cheap/expensive (default 25%)
    - price_min_diff_ore: Minimum price difference in Ã¸re to trigger optimization (default 0)
      This prevents sacrificing comfort for minimal savings
    
    The minimum difference acts as a 'comfort cap' - if the potential savings are below this
    threshold, the optimization won't trigger even if the percentage threshold is met.

commit efdf47998e3a0b53247fa54a07db19e4e93f6916
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Tue Dec 2 10:27:42 2025 +0100

    Refactor price optimization: use delta-based approach with unified threshold calculation
    
    - Changed from normalTemp/boostTemp to cheapDelta/expensiveDelta relative to mode's base temp
    - Threshold is now 25% deviation from average (cheap < 75%, expensive > 125%)
    - Backend calculates isCheap/isExpensive flags once, UI just displays them
    - Added combined_prices setting with pre-calculated thresholds for UI consistency
    - Price settings collapsed into expandable section in UI
    - Added caching for spot prices and nettleie (only fetch if today's data missing)
    - Added price optimization checkbox to devices list
    - Added tests for price UI display and delta calculations

commit 06ce792c301631c1880ed20f415dbce04c62dd54
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Tue Dec 2 10:27:42 2025 +0100

    Add price optimization feature
    
    - Boost water heater temperature during cheapest hours
    - Combines spot price + nettleie for total cost calculation
    - Per-device settings: normal temp, boost temp, cheap hours count
    - Hourly scheduler aligned to clock hours
    - UI with grid layout for device configuration
    - Tests for price optimization logic and UI

commit c36585331c2657b698ef48e5bc790a0fbd19cbd3
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Tue Dec 2 10:27:42 2025 +0100

    Make settings tabs horizontally scrollable
    
    - Change tab layout from wrapping to horizontal scroll
    - Prevents tabs from wrapping to multiple lines on narrow screens
    - Add CSS for smooth horizontal scrolling
    - Update UI tests for new tab behavior

commit 45f86585800c138cfd3a3aab5f73176a3653a8ad
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Tue Dec 2 10:27:42 2025 +0100

    Add electricity price fetching from hvakosterstrommen and NVE
    
    - Integrate with hvakosterstrommen.no API for spot prices
    - Fetch grid tariffs (nettleie) from NVE API
    - Add price display UI in settings with hourly breakdown
    - Create price tab with visual indicators for cheap/expensive hours
    - Add comprehensive test suite for price functionality
    - Support different price zones

commit 8a383307d4647060733e40626ec61c3f2e36bab9
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Tue Dec 2 10:27:42 2025 +0100

    Fix mode check card status display
    
    - Correct the status text shown in mode check flow card
    - Ensure proper mode name is displayed

commit 2499284c60f8a659fb641f58cb92d0a41fcdea3c
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Tue Dec 2 10:27:42 2025 +0100

    Improve TypeScript types and fix lint errors
    
    - Add proper type annotations throughout app.ts
    - Fix capacity guard type issues
    - Resolve all TypeScript lint warnings
    - Improve type safety for device handling

commit 55c7416b49b90e2c87f3da7cd900fd4170d0f4c3
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Tue Dec 2 10:27:42 2025 +0100

    Simplify settings UI with auto-save
    
    - Remove manual save buttons from settings forms
    - Settings now auto-save on change
    - Cleaner UI without save button clutter

commit fb4f61493be26a54d43d7d03c5efc4dec9c5863f
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Tue Dec 2 10:27:42 2025 +0100

    Add settings UI test suite and fix layout issues
    
    - Create comprehensive UI test suite (settings-ui.test.ts)
    - Add Jest configuration for UI testing
    - Fix CSS styling issues in settings page
    - Add jsdom and related test dependencies

commit 217ea438e47527945d1a011fe340e477da76f6ac
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Tue Dec 2 10:27:42 2025 +0100

    Improve code quality based on review feedback
    
    - Refactor app.ts for better readability
    - Fix version string in app.json
    - Update README formatting
    - Remove unused imports from settings script

commit b99db071c8fd0d86c43842e9b3d2f285219f4f19
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Tue Dec 2 10:27:42 2025 +0100

    Update README with current project information
    
    - Simplify and update documentation
    - Remove outdated information

commit 4489446210ce3b79b885971e5842efcc55da0239
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Tue Dec 2 10:27:42 2025 +0100

    Update app icon with new design
    
    - Redesign SVG icon for better visibility
    - Improve icon appearance in Homey app store

commit 8f7f3d3f06b60dcd0ea4ee90dbf80f7947f1a4d6
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Tue Dec 2 10:27:42 2025 +0100

    Update banner images with new design
    
    - Replace large, small, and xlarge banner images
    - New images with updated branding

commit bc2c865c6a7ac463cb18bc22dd7a806f8e701813
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Tue Dec 2 10:27:42 2025 +0100

    Fix mode configuration page and add settings tests
    
    - Fix issues with mode configuration in the settings UI
    - Improve mode editing and saving functionality
    - Add comprehensive test suite for settings behavior
    - Update app.ts with mode configuration fixes

commit 59cdbe76ae553aa4accb076d922c9315ecbb5096
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Tue Dec 2 10:27:42 2025 +0100

    Add npm script for installing the app
    
    - Add 'install' command to package.json for deployment

commit 4d5d950d6816b215e79e3918ff0dd891a2ba4df4
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Tue Dec 2 10:27:42 2025 +0100

    Add npm script for starting the app
    
    - Add 'start' command to package.json for easier development

commit 030bce8cff9be3dc42f8e945cee636c1e7b9f2df
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Tue Dec 2 10:27:42 2025 +0100

    Convert settings JavaScript to TypeScript
    
    - Migrate settings/script.js to settings/src/script.ts
    - Add TypeScript compilation for settings
    - Update .gitignore and .homeyignore for build artifacts
    - Refactor script with proper TypeScript types
    - Add necessary TypeScript dependencies

commit 227d66ffadb4d8c356d7530d1b196a771c2054bd
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Tue Dec 2 10:27:42 2025 +0100

    Add current hourly usage details to plan tab
    
    - Display current hour's power consumption in the plan view
    - Add styling for the usage display
    - Update script to fetch and render hourly data

commit 5ca3642a81c23e424d9317f02a788ca6f2570aa8
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Tue Dec 2 10:27:42 2025 +0100

    Fix guard sync issue with power tracking
    
    - Fix synchronization bug in capacity guard power tracking
    - Ensure power readings are properly synchronized
    - Add tests for guard sync behavior

commit d2255bc3ac31c9eae97935d5c1ef3c4b9f699292
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Tue Dec 2 10:27:42 2025 +0100

    Add fallback to last known power when load data unavailable
    
    - Store last known drawn power in memory
    - Use fallback value when settings.load is not available
    - Prevents errors when power data is temporarily missing

commit 53726aac5e0a157fdb8a0133daa2e887ec604720
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Mon Dec 1 10:43:49 2025 +0100

    Add logic to swap devices when a low pri devices can be sacrificed for higher pri devices

commit 5fdec2f8b18103a0b5e7ac10a2a04255f4de8ef3
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Mon Dec 1 08:44:55 2025 +0100

    Use fake timers to make the tests stop freezing

commit dd5c4f3b2058405cff58240f30a1d105f524734e
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Mon Dec 1 08:17:16 2025 +0100

    Plan UI now refreshes when the plan change

commit bd7425aa9901baf19b17a0f3f3b92a56ea1ade54
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Mon Dec 1 08:07:27 2025 +0100

    Fix set capacity mode flow

commit a1952b0dc0562921db671bcad4b872138123514c
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sun Nov 30 22:01:54 2025 +0100

    Add test around the connected 300 device

commit 5826abe8827f7f1005d0aacb99c4f5434f525adb
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sun Nov 30 21:50:15 2025 +0100

    Add test for the set mode card

commit 26a5459f5c38e07e4d043a0f5f3eb39057e69383
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sun Nov 30 21:44:43 2025 +0100

    Regularly update device state from Homey API

commit 90cb361b1d8e3378524e65b3ed112443f8f7bb8d
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sun Nov 30 21:25:47 2025 +0100

    Remove old and silly things

commit fbf9f78746eb0260b1f7a41281c2acb70f1541de
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sun Nov 30 19:07:12 2025 +0100

    Add a flow card for testing against current mode

commit e5db97497f533923c35a57653254c720aa1fde93
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sun Nov 30 18:56:23 2025 +0100

    Prevent more flapping by only enabling a few devices in one go

commit 700874493fb75989bbf0eb9cb1116375fd32ceb6
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sun Nov 30 18:02:19 2025 +0100

    Use load settings to better determine which devices to turn back on

commit dbae443ae41cad8de636c39f1727fd24e83875d2
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sun Nov 30 10:46:17 2025 +0100

    Make capacity shortfall card more usable

commit b68e5e0cefe79c185bbf8e7ff3dac884f926ec53
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sun Nov 30 10:33:30 2025 +0100

    Fix some more redundant temperature control

commit a33f37dfd5ce61c28de5523e762f77e889b59f08
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sun Nov 30 10:28:53 2025 +0100

    Small tweaks to mode editor

commit 890f08947e780695bcd709dc980e976265f8944b
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sun Nov 30 09:47:24 2025 +0100

    Prevent redundant setting of temperature

commit a4776d6405e02402721dca3b0066d415198dfc82
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sun Nov 30 09:43:02 2025 +0100

    Create a card for when we can't get the load within budget

commit b1d4ab2de7457b25502a80420daa7c6c417af10d
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sun Nov 30 09:37:24 2025 +0100

    Fix flapping devices

commit 3d721ca1dadf865d858d00cd5de015cadc54e8a9
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sun Nov 30 09:16:27 2025 +0100

    Some UI tweaks

commit fe5cea013eb83a9f2736bd7677e50a1ca3fbdc36
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sun Nov 30 08:58:37 2025 +0100

    Sort devices by priority in the plan logs

commit 255751e0be648066db09a9610febe9f5a1a05382
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sun Nov 30 08:48:14 2025 +0100

    Add an extra test for overshooting

commit 6c6bb60ca7a5ec3f7ca7f673e071c961bb1c0db0
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sat Nov 29 21:54:52 2025 +0100

    Prevent flapping

commit 5fe0ab8bc1321aebb51163dff10156adb5299da1
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sat Nov 29 21:26:17 2025 +0100

    Fix powering on and off devices

commit 6668598919cb39e5563cea0332b640a31c8bc75a
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sat Nov 29 20:08:40 2025 +0100

    Fix powering off devices

commit 3b07b2caabb8152ddf75c2bcb405c42971ca5786
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sat Nov 29 18:26:58 2025 +0100

    Actually execute device updates

commit 143a051a6d7b8bdbf7714b6815de3a70329a0626
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sat Nov 29 18:57:00 2025 +0100

    Make it possible to toggle if a device is controlled or not

commit 76aa98e0e9da0fb8a5e63dccca7e22c82bfd70b7
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sat Nov 29 18:08:42 2025 +0100

    Log the plan when it changes

commit 3677fc972c88450c6783ad2d50f4d0a36d2d5f1a
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sat Nov 29 17:28:01 2025 +0100

    Fixed bug in power usage logic. Also added a reset stats button

commit 9ba0752fe8ef8b8c6e39c2c32cf008e95c6928b4
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sat Nov 29 17:16:29 2025 +0100

    Make sure capacity changes are reflected in the calculations

commit 2fac649dc8747cbb42b63f3f0731adbd694a2566
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sat Nov 29 17:11:38 2025 +0100

    Remove usage of deprecated zone.name

commit 1e7a432506096c40233be083e67963a53145118c
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sat Nov 29 17:09:11 2025 +0100

    Log hourly budgets

commit 05053f86247d1db644087569adbf5e799912aa1b
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sat Nov 29 16:59:15 2025 +0100

    Add a UI to show the list of changes the app wants to do

commit ac76011aedca31525e174486d789e2e820c373eb
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sat Nov 29 16:08:14 2025 +0100

    Remove logging of caps

commit 02c18fc5bfb67f1e2d6a0d71108b1f729db0fb3e
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sat Nov 29 15:49:05 2025 +0100

    Add autocomplete for the change mode card

commit d26c95481c54232c954dcb0367791b3daddc6128
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sat Nov 29 11:10:39 2025 +0100

    Make it possible to rename modes

commit d9df3c8ff5c42c2c576d68773cb951c881adcc55
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sat Nov 29 11:02:38 2025 +0100

    Add a device for seeing stuff like what the current mode is

commit 5295d2899b494e52ee5729270a52048734771074
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sat Nov 29 10:38:04 2025 +0100

    Make temperature configurable per mode

commit 366432933a0f9a59fe97ec89523c07888f544628
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sat Nov 29 10:05:40 2025 +0100

    Make priority configurable per mode

commit 5a16deed3db93302904f934d91d3053cf04445b4
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sat Nov 29 09:05:01 2025 +0100

    Refactor and add more tests

commit 3d8d7379c6643d79197fd9a97d4572b5bce1d495
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Sat Nov 29 07:59:00 2025 +0100

    Started on logic for capacity constraints

commit ace52bae87cdc67bb246c3d5d1f5f344068616b5
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Thu Nov 27 21:57:49 2025 +0100

    Added card for fetching power usage

commit 68efadfce11da2bac242bdee8116182355b54cc5
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Thu Nov 27 21:41:07 2025 +0100

    list devices in the settings page

commit a644515f47f8441cad016e4ae6194e62eee6fa19
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Thu Nov 27 20:03:07 2025 +0100

    Added tests

commit cc1b7661637e969ac48b1a29406ae6debb44e137
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Thu Nov 27 19:45:54 2025 +0100

    Add settings skeleton

commit 6e1541e5b4cc1d80af39e1e083726df2947aa44c
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Thu Nov 27 19:45:37 2025 +0100

    Fix app.json

commit b0665afb55b536c66ce61c03dc28e43fda5eeaea
Author: Ole Markus With <olemarkus@gmail.com>
Date:   Wed Nov 26 20:29:41 2025 +0100

    skeleton for app
