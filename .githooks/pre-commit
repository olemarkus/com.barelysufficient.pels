#!/bin/sh
# Pre-commit hook to run tests before committing

echo "Running tests..."

# Run build first (compiles TypeScript and settings)
npm run build
if [ $? -ne 0 ]; then
  echo "❌ Build failed. Commit aborted."
  exit 1
fi

# Run unit tests
npm test
if [ $? -ne 0 ]; then
  echo "❌ Unit tests failed. Commit aborted."
  exit 1
fi

# Run UI tests (Puppeteer)
echo "Running UI tests..."
npx jest --config jest.config.ui.cjs
if [ $? -ne 0 ]; then
  echo "❌ UI tests failed. Commit aborted."
  exit 1
fi

echo "✅ All checks passed!"
exit 0
